@using RMS.Utility
@using System.Web.UI.WebControls
@using RMS.Web.Extensions
@model RMS.Web.Models.ViewModel.QuaterlyReturnViewModel
@{
    /**/

    /**/

    Layout = "~/Views/Shared/_Layout.cshtml";
}
<style>
    .description {
        text-align: justify;
    }
</style>
@if (Model.SearchELement != "hide")
{
    <div class="row">
        <div class="col-md-12">
            <div class="card">
                <div class="card-header">
                    <div>
                        <h3 class="card-title">Quaterly Return</h3>
                    </div>
                    <div class="card-options">
                        @Html.ActionLink("Add New", "QuaterlyReturnEdit", "DamageMachineriesInfo", new { @class = "btn btn-primary", style = "color:#ffffff" })
                    </div>
                </div>
                <div class="card-body">
                    @using (Html.BeginForm("QuaterlyReturnView", "DamageMachineriesInfo", FormMethod.Get, new { @class = "submit-allow validation" }))
                    {
                        <div class="row row-sm">
                            <div class="col-md-3 col-sm-12">
                                <div class="form-group mg-b-0">
                                    <label class="form-label">Report No: <span class="text-danger">*</span></label>
                                    @Html.DropDownListFor(x => x.ReturnReportNoId, Model.ReportNoSelectListItem, "-Select-", new { @class = "dropdownsize form-control", tabindex = 5, placeholder = "Enter Value", required = "required" })
                                </div>
                            </div>
                            <div class="col-md-3 col-sm-12">
                                <div class="form-group mg-b-0">
                                    <label class="form-label">Report Year: <span class="text-danger">*</span></label>
                                    @Html.DropDownListFor(x => x.ReportYearId, Model.ReportYearSelectListItem, "-Select-", new { @class = "dropdownsize form-control", tabindex = 5, placeholder = "Enter Value", required = "required" })
                                </div>
                            </div>
                            <div class="col-md-3 col-sm-12">
                                <div class="form-group mg-b-0">
                                    <label class="form-label">Ship: <span class="text-danger">*</span></label>
                                    @Html.DropDownListFor(x => x.SearchKey, Model.ShipInfoSelectListItems, "-Select-", new { @class = "dropdownsize form-control", tabindex = 5, placeholder = "Enter Value", required = "required" })
                                </div>
                            </div>
                            <div class="col-md-3 col-sm-12">
                                <label class="form-label"> <span class="text-danger"></span></label>
                                <button class="btn btn-primary" style="margin-top:22px"><i class="fa fa-search" aria-hidden="true"></i>Search</button>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>

    </div>
}

@if (Model.QuaterlyReturn != null)
{
    <!-- Row -->
    <div class="row">
        <div class="col-md-12 col-12">
            <div class="expanel expanel-primary">
                <div class="expanel-heading">
                    <h3 class="expanel-title" style="text-align:center;">@Model.ShipName</h3>
                    <h3 class="expanel-title" style="text-align:center;">@Model.ReportMonth</h3>
                </div>
                <div class="expanel-body">

                    <div class="col-md-12 col-lg-12">
                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <h3 class="card-title">A. SHIP EMPLOYED DURING QUATER</h3>
                                </div>
                            </div>
                            <div class="card-body" style="max-height:100% !important">
                                <div class="table-responsive">
                                    <table id="" class="table table-striped table-bordered text-nowrap w-100">
                                        <tbody>
                                            <tr>
                                                <td><strong>Days</strong></td>
                                                <td>@Model.QuaterlyReturn.TotalNoOfDay</td>
                                                <td><strong>No</strong></td>
                                                <td>@Model.QuaterlyReturn.ReturnReportNo.ReturnSerialNo</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Date From </strong></td>
                                                <td>@Model.StartDate</td>
                                                <td><strong>Date To</strong></td>
                                                <td>@Model.EndDate</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Completion Date of Last</strong></td>
                                                <td>@Model.EndDate</td>
                                                <td><strong>Undergoing Refit</strong></td>
                                                <td>@Model.QuaterlyReturn.UndergoingRefit</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Refit</strong></td>
                                                <td>@Model.QuaterlyReturn.Refit</td>
                                                <td><strong>In Dock</strong></td>
                                                <td>@Model.QuaterlyReturn.InDocking</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Undocking</strong></td>
                                                <td>@Model.QuaterlyReturn.UndergoingRefit</td>
                                                <td><strong>Maintenance Period</strong></td>
                                                <td>@Model.QuaterlyReturn.MaintancePeriod</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Full Power Trial</strong></td>
                                                <td>@Model.QuaterlyReturn.FullPowerTrial</td>
                                                <td><strong>Non-Operational (For Other Reasons)</strong></td>
                                                <td>@Model.QuaterlyReturn.NonOplReason</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Inspection By</strong></td>
                                                <td>-</td>
                                                <td><strong>At Sea (i.e M/E used)</strong></td>
                                                <td>@Model.QuaterlyReturn.AtSea</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Distance Run</strong></td>
                                                <td>@Model.QuaterlyReturn.DistanceRun</td>
                                                <td><strong>At Normal Notice</strong></td>
                                                <td>@Model.QuaterlyReturn.AtNormalNotice Days</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Time Underway</strong></td>
                                                <td>@Model.QuaterlyReturn.TimeUnderway Hrs/Min</td>
                                                <td><strong>Total (Must equal) No of Days</strong></td>
                                                <td>@Model.QuaterlyReturn.TotalNoOfDay</td>
                                            </tr>    
                                            <tr>
                                                <td><strong>Time awaiting orders </strong></td>
                                                <td colspan="3">@Model.QuaterlyReturn.TimeAwaitingOrder Hrs/Min</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="col-md-12 col-lg-12">
                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <h3 class="card-title">B. CONSUMPTION DATA FOR THE QUATER</h3>
                                </div>
                            </div>
                            <div class="card-body" style="max-height:100% !important">
                                <div class="table-responsive mb-3">
                                    <table class="table table-striped table-bordered text-nowrap w-100">
                                        <tbody class="col-lg-6 p-0">
                                            <tr>
                                                <td><strong>Diesel Oil Main Engine</strong></td>
                                                <td>@Model.QuaterlyReturn.MainEngineFuelQuantity Ltrs</td>
                                                <td><strong>Diesel Oil Others </strong></td>
                                                <td>@(Model.QuaterlyReturn.CommonCode2!=null ? Model.QuaterlyReturn.CommonCode2.TypeValue: "")  @Model.QuaterlyReturn.OthersLubOilQuantity (DG)</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Fresh Water</strong></td>
                                                <td>@Model.QuaterlyReturn.FreshWaterQuaterlyConsumption</td>
                                                <td><strong>Lub Oil </strong></td>
                                                <td>@(Model.QuaterlyReturn.CommonCode5 != null ? Model.QuaterlyReturn.CommonCode5.TypeValue : "-" ) @Model.QuaterlyReturn.MainEngineLubOilQuantity (M/E) Ltrs</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Lub Oil Others</strong> </td>
                                                <td>@(Model.QuaterlyReturn.CommonCode4!=null ? Model.QuaterlyReturn.CommonCode4.TypeValue: "")  @Model.QuaterlyReturn.OthersLubOilQuantity Ltrs </td>
                                                <td><strong>Lub Oil Nuto -H-100</strong></td>
                                                <td>@Model.QuaterlyReturn.PercentOfLubOilQuaterlyConsumption  Ltrs </td>
                                            </tr>
                                            <tr>
                                                <td><strong>Percentange of Lub Oil to Fueil Oil </strong></td>
                                                <td>@Model.QuaterlyReturn.PercentOfLubOilQuaterlyConsumption</td>
                                                <td><strong>Percentange of Lub Oil to Fueil Oil </strong></td>
                                                <td>@Model.QuaterlyReturn.PercentOfLubOilQuaterlyConsumption</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Percentange of Lub Oil to Fueil Oil </strong></td>
                                                <td>@Model.QuaterlyReturn.PercentOfLubOilQuaterlyConsumption</td>
                                                <td><strong>Average Load at Sea</strong> </td>
                                                <td>@Model.QuaterlyReturn.LoadAtSeaQuaterlyConsumption</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Refrigerator</strong></td>
                                                <td>@Model.QuaterlyReturn.RefrigerantQuaterlyConsumption</td>
                                                <td><strong>Average Load in Harbour</strong></td>
                                                <td>@Model.QuaterlyReturn.LoadAtHarbourQuaterlyConsumption</td>
                                            </tr>
                                            
                                        </tbody>
                                    </table>
                                </div>

                            </div>
                        </div>
                    </div>

                    <div class="col-md-12 col-lg-12">
                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <h3 class="card-title">C. Quaterly Main Engines & Generators Running Hours</h3>
                                </div>
                            </div>
                            <div class="card-body" style="max-height:100% !important">
                                <div class="table-responsive">
                                    <table id="" class="table table-striped table-bordered text-nowrap w-100">
                                        <thead>
                                            <tr>
                                                <th rowspan="2" class="wd-15p">Machine Name</th>
                                                <th colspan="2" class="wd-15p">During Quater</th>
                                                <th colspan="2" class="wd-15p">Since Last LO Change</th>
                                                <th colspan="2" class="wd-15p">Since Last TopOver haul</th>
                                                <th colspan="2" class="wd-15p">Since Last Major Over haul</th>
                                                <th colspan="2" class="wd-15p">Since Commission In BN</th>
                                                <th colspan="2" class="wd-15p">Since Installation</th>
                                                <th rowspan="2" class="wd-15p">Remarks</th>
                                            </tr>
                                            <tr>
                                                <th>Hr</th>
                                                <th>Min</th>
                                                <th>Hr</th>
                                                <th>Min</th>
                                                <th>Hr</th>
                                                <th>Min</th>
                                                <th>Hr</th>
                                                <th>Min</th>
                                                <th>Hr</th>
                                                <th>Min</th>
                                                <th>Hr</th>
                                                <th>Min</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @foreach (var item in Model.quaterlyMainEnginesGeneratorsRunningHours)
                                            {
                                                <tr>
                                                    <td>@item.MachineryInfo.Machinery</td>
                                                    <td>@item.DuringQuaterHr</td>
                                                    <td>@item.DuringQuaterMin</td>
                                                    <td>@item.SinceLastLOChangeHr</td>
                                                    <td>@item.SinceLastLOChangeMin</td>
                                                    <td>@item.SinceLastTopOverhaulHr</td>
                                                    <td>@item.SinceLastTopOverhaulMin</td>
                                                    <td>@item.SinceLastMajorOverhaulHr</td>
                                                    <td>@item.SinceLastMajorOverhaulMin</td>
                                                    <td>@item.SinceCommissionInBNHr</td>
                                                    <td>@item.SinceCommissionInBNMin</td>
                                                    <td>@item.SinceInstallationHr</td>
                                                    <td>@item.SinceInstallationMin</td>
                                                    <td>@item.Remarks</td>

                                                </tr>
                                            }

                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-12 col-lg-12">
                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <h3 class="card-title">D. Machinery Under Trial</h3>
                                </div>
                            </div>
                            <div class="card-body" style="max-height:100% !important">
                                <div class="table-responsive">
                                    <table id="" class="table table-striped table-bordered text-nowrap w-100">
                                        <tbody class="col-lg-12 p-0">
                                            <tr>
                                                <td><strong><u>Remarks On Performance of Machinery/Equipment On Trial Stating Occasion of Trial :</u></strong> @Model.QuaterlyReturn.MachineryUnderTrialRemarks</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 col-lg-12">
                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <h3 class="card-title">E. REMARKS OF THE ENGINEER OFFICER</h3>
                                </div>
                            </div>
                            <div class="card-body" style="max-height:100% !important">
                                <div class="table-responsive">
                                    <table id="" class="table table-striped table-bordered text-nowrap w-100">
                                        <tbody class="col-lg-12 p-0">
                                            @foreach (var item in Model.QuaterlyReturn.QuaterlyReturnEngineerOfficerRemarks.OrderBy(x => x.RemarkTitle))
                                            {
                                                <tr>
                                                    <td><strong><u>@item.RemarkTitle :</u></strong> @item.RemarkDetails</td>
                                                </tr>
                                            }

                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-12 col-lg-12">
                        <div class="card">
                            <div class="card-header">
                                <div>
                                    <h3 class="card-title">E. REMARKS OF THE ENGINEER OFFICER</h3>
                                </div>
                            </div>
                            <div class="card-body" style="max-height:100% !important">
                                <div class="table-responsive">
                                    <table id="" class="table table-striped table-bordered text-nowrap w-100">
                                        <tbody class="col-lg-12 p-0">
                                            @{int i = 1;}
                                            @if(Model.QuaterlyReturn.RemarksOfAdministrativeAuthority != null)
                                            {
                                                foreach (var item in Model.QuaterlyReturn.RemarksOfAdministrativeAuthority.Split(new[] { "1.", "2.", "3.", "4.", "5.", "6", "7.", "8.", "9.", "10." }, StringSplitOptions.None))
                                                {
                                                    <tr>
                                                        @if (item != "")
                                                        {
                                                            <td>@i. @item</td>
                                                            { i++; }
                                                        }

                                                    </tr>
                                                }
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Row End-->

}
else
{
    if (Model.ReturnReportNoId > 0 && Model.ReportYearId > 0 && Model.SearchKey != null)
    {
        <h4>Not Found</h4>
    }

}





